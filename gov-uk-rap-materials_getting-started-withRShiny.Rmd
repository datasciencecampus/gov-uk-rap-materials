---
title: "RShiny and flex_dashboard example"
author: "Joseph Crispell"
date: "`r format(Sys.Date(), '%d %b %Y')`"
output:
    flexdashboard::flex_dashboard:
      orientation: columns
      source_code: embed
runtime: shiny
---

```{r global, include=FALSE}
# Using "global" chunk so data is available to all users

# Load libraries
library(datasets) # Load datasets package - example datasets
library(plotly) # Interative plots

# Load example data sets
data(faithful) # Load eruption data
data(iris) # Plant species information
```

Guide
=====================================

### Introduction

The current document provides some simple examples that combine `flex_dashboard` and `RShiny` to create interactive dashboards for visualising and exploring data. As you can see this document is a work in progress!!

### Useful resources

Here's a list of resources that I found really useful when I was creating this dashboard:

- [Using `RShiny` and `flex_dashboard`](https://rmarkdown.rstudio.com/flexdashboard/shiny.html)
- [Getting started with `flex_dashboard`](https://rmarkdown.rstudio.com/flexdashboard/using.html)
- [Getting started with `RShiny`](https://shiny.rstudio.com/tutorial/)
- [Examples of `RShiny` and `flex_dashboard` in action](https://rmarkdown.rstudio.com/flexdashboard/examples.html)
- [Creating an `RShiny` `flex_dashboard`](https://medium.com/analytics-vidhya/shiny-dashboards-with-flexdashboard-e66aaafac1f2)
- [Where to host your `Rshiny` application](https://shiny.rstudio.com/deploy/)


Example: Selecting datasets
=====================================

Column {.sidebar}
-----------------------------------------------------------------------

Select which dataset you would like to visualise:

```{r}
selectInput("dataset", label="Choose dataset:",
            choices=c("geyser", "iris"), 
            selected="iris")
```

Column
-----------------------------------------------------------------------

### Interactive graphic

```{r}

# Get the dataset selected
dataset <- reactive({input$dataset})

# Create the interactive plotly graphic
renderPlotly({

  # Check if we are using the iris dataset or the geysers
  if(dataset() == "iris"){
    
    # Create the initial interactive graphic
    fig <- plot_ly(type="scatter")
    
    # Add a data trace
    fig <- add_trace(fig, x=iris$Sepal.Length, y=iris$Petal.Length, color=iris$Species,
                     hovertemplate=paste0("<b>Petal length: </b>: ", round(iris$Petal.Length, digits=1),
                                          "<br><b>Sepal length: </b>: ", round(iris$Sepal.Length, digits=1)))
    

    # Set the axis labels
    fig <- layout(fig, 
                  xaxis=list(title="<b>Sepal Length</b>", titlefont=list(size=16)), 
                  yaxis=list(title="<b>Petal Length", titlefont=list(size=16)),
                  title="<b>Flower dimensions in different species<b>")

  }else{
    
    # Create the initial interactive graphic
    fig <- plot_ly(type="histogram")
    
    # Add a data trace
    fig <- add_trace(fig, x=faithful$eruptions, name="Old faithful",
                     hovertemplate=paste0("<b>Duration</b>: ", round(faithful$eruptions, digits=1)))
    
    # Remove the legend
    fig <- layout(fig, showlegend=FALSE)
    
    # Set the axis labels
    fig <- layout(fig, 
                  xaxis=list(title="<b>Duration (minutes)</b>", titlefont=list(size=16)), 
                  yaxis=list(title="<b>Frequency<b>", titlefont=list(size=16)),
                  title="<b>Geyser Eruption Duration<b>")
  }
})



```
